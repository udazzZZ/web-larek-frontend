# Проектная работа "Веб-ларек"

Web-ларёк - интернет-магазин для веб-разработчиков. В нем можно полистать каталог товаров, добавить понравившиемся товары в корзину и оформить заказ.

## Используемый стек:
- HTML5, SCSS, TypeScript 
- Webpack — сборка проекта
- Babel — транспиляция кода
- ESLint + Prettier — линтинг и форматирование
- MVP (Model-View-Presenter) — архитектурный паттерн

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Архитектура приложения

Приложение основано на паттерне MVP - Model-View-Presenter. В данном случае все приложение управляется общим Presenter'ом, который координирует работу всех компонентов **View** и **Model** через событийно-ориентированный подход. То есть View и Model инициируют события, который обрабатываются Presenter'ом. Связь между моделями и отображениями реализуется с помощью брокера событий - EventEmitter.

### Базовый класс Api

Реализация набора операций для работы с сервервным API. Использует следующие HTTP методы:
```
type TApiPostMethods = 'POST' | 'PUT' | 'DELETE'
```

### Базовый класс EventEmitter

Классическая реализация брокера событий. Обеспечивает возможность установить и снять слушатели событий, вызвать слушатели при возникновении событий.

### Абстрактный класс Model

Абстрактный класс, который определяет конструктор всех моделей данного приложения.

### Абстрактный класс View

Абстрактный класс, который определяет конструктор всех отображений данного приложения. Содержит также метод для рендера привязанного к отображению DOM элемента и список привязанных к данному отображению событий, а также брокер событий для сообщений о внутренних событиях.

### Модели

#### CartModel

Управляет состоянием корзины.

Функции:

- Добавление/удаление товара в/из корзины

- Получение списка товаров в корзине

- Очистка корзины

#### CatalogModel

Управляет данными каталога товаров.

Функции:

- Загрузка списка товаров

- Получение информации о конкретном товаре

#### CheckoutModel

Хранит данные, введенные пользователем на этапе оформления заказа.

Функции:

- Установка валидации данных доставки и оплаты

- Установка валидации контактной информации

### Отображения

#### CatalogView

Отображает список товаров.

Функции:

- Рендер каталога
- Обработка кликов на карточках товара

#### ProductModalView

Показывает детальную информацию о товаре.

Функции:

- Рендер модального окна

- Обработка событий кнопки "Купить" или "Удалить из корзины" (в случае, если товар уже находится в корзине)

#### CartView

Показывает содержимое корзины.

Функции:

- Отображение списка товаров в корзине

- Обработка удаления товара

- Очика корзины после оплаты

#### CheckoutView

Отображает шаги оформления заказа.

Функции:

- Рендер формы оплаты и доставки

- Валидация и отображение ошибок при заказе

- Отображение подтверждения покупки

### Брокер событий (EventEmitter)

Общий посредник между Model и View, реализован через EventEmitter. Все компоненты обмениваются данными и командами через события, которые генерируются при действиях пользователя или изменениях состояния.

- Связавает модели и отображения
- Обрабатывает события
- Рассылает обновления данных по подписчикам